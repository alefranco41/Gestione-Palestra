{% extends "base.html" %}
{% block title %} {{ gym_name }} - Profile Manager {% endblock title %}

{% block header %} Update your personal info {% endblock header %}

{% block content %}
<div style="display: flex; justify-content: center;">
    <form id="profile-form" action="{% url 'update-profile' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="first_name">First Name:</label>
        <input type="text" id="first_name" name="first_name" value="{{ user_profile.first_name }}" required>
        <br>
        <label for="last_name">Last Name:</label>
        <input type="text" id="last_name" name="last_name" value="{{ user_profile.last_name }}" required>
        <br>
        <label for="gender">Gender:</label>
        <select id="gender" name="gender" required>
            <option value="M" {% if user_profile.gender == 'M' %} selected {% endif %}>Male</option>
            <option value="F" {% if user_profile.gender == 'F' %} selected {% endif %}>Female</option>
        </select>
        <br>
        <label for="date_of_birth">Date of Birth:</label>
        <input type="date" id="date_of_birth" name="date_of_birth" value="{{ user_profile.date_of_birth|date:'Y-m-d' }}" required>
        <br>
        <label for="height">Height (cm):</label>
        <input type="number" id="height" name="height" value="{{ user_profile.height }}">
        <br>
        <label for="weight">Weight (kg):</label>
        <input type="number" id="weight" name="weight" value="{{ user_profile.weight }}">
        <br>
        <label for="profile_picture">Profile Picture:</label>
        <input type="file" id="profile_picture" name="profile_picture" accept="image/*">
        <br>
        <button type="submit">Submit</button>
    </form>
</div>

<script>
document.getElementById('profile-form').addEventListener('submit', function(event) {
    var fileInput = document.getElementById('profile_picture');
    var file = fileInput.files[0];
    if (file && !file.type.startsWith('image/')) {
        event.preventDefault();
        alert('Please select an image file.');
    }
});
</script>
{% endblock %}
